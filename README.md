Sbt plugin for working with webjars
===================================

This plugin:
- allows you to list webjars in the correct sbt scope (`Test`, `Compile`, `Runtime`).
- extract webjars to disk to make them available for other plugins
- creates a `webjars.list` file with information about the available webjars.

Installation
------------

Add the following to the `project/plugins.sbt` file:

``` scala
addSbtPlugin("org.qirx" % "sbt-webjar" % "0.3")

resolvers += Resolvers.url("Rhinofly Internal Repository", url("http://maven-repository.rhinofly.net:8081/artifactory/libs-release-local"))(Resolver.ivyStylePatterns)
```

Usage
-----

**Using webjars in an sbt configuration**

The code below creates a task for displaying webjars in `Compile`

``` scala
import WebjarKeys._

webjarSettings

val listWebjars = taskKey[Unit]("Lists the webjars that are available")

listWebjars := (webjars in Compile).value foreach println
```

This task can be executed by typing `listWebjars` in `sbt`.

To quickly examine the available webjars in a certain scope type `show test:webjars`.

An example of a `Webjar` instance:

```
Webjar(
  name = requirejs,
  version = 2.1.8,
  path = .../extractWebjars/$global/requirejs-2.1.8.jar,
  resources = .../extractWebjars/$global/requirejs-2.1.8.jar/META-INF/resources/webjars/requirejs/2.1.8
)
```

**Using webjars from a class in a certain configuration**

The code below retrieves a list of available webjars

``` scala
import scala.io.Source

object test {

  def main(args:Array[String]):Unit = {

    val url = getClass.getClassLoader.getResource("webjars.list")
    println(Source.fromFile(url.toURI).mkString)
  }
}
```

This file has lines (separated with `\n`) that have the following structure:

```
{name};{version};{path to library in resources}
```

An example:

```
requirejs;2.1.8;META-INF/resources/webjars/requirejs/2.1.8
```

Configuration
-------------

**Settings defined by this plugin**

*Keys are set in the WebjarKeys object*

|Setting              |Description                                                        |
|---------------------|-------------------------------------------------------------------|
|`webjarDependencies` |Generates a list of webjars from the managed classpath             |
|`extractWebjars`     |Extracts the webjars and returns the location of the extracted jars|
|`webjars`            |Returns a list of Webjar case classes                              |
|`generateWebjarList` |Generates a list of webjars and returns the file it created        |

**Settings used by this plugin**



|Setting                                  |Description                                            |Default value                     |
|-----------------------------------------|-------------------------------------------------------|----------------------------------|
|managedClasspath in webjarDependencies   |Used by `webjarDependencies` to find webjars           |`managedClasspath`                |
|includeFilter in extractWebjars          |Used by `extractWebjars` to determine what to include  |`"*"`                             |
|excludeFilter in extractWebjars          |Used by `extractWebjars` to determine what to exclude  |`NothingFilter`                   |
|target in generateWebjarList             |The file that is generated by `generateWebjarList`     |`resourceManaged / "webjars.list"`|

